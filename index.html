<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>夏日物语：与她的相遇</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Microsoft YaHei", Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
        }

        h1 {
            font-size: 2.5rem;
            color: #00ffcc;
            text-shadow: 0 0 10px rgba(0, 255, 204, 0.5);
            margin-bottom: 10px;
        }

        .subtitle {
            color: #aaa;
            font-size: 1.1rem;
        }

        /* 选择界面样式 */
        #selectionScreen {
            display: block;
        }

        .character-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .character-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .character-card:hover {
            transform: translateY(-5px);
            border-color: #00ffcc;
            box-shadow: 0 5px 20px rgba(0, 255, 204, 0.3);
        }

        .character-card.selected {
            border-color: #00ffcc;
            background: rgba(0, 255, 204, 0.1);
        }

        .character-card img {
            width: 100%;
            height: 430px;
            object-fit: cover;
        }

        .character-info {
            padding: 15px;
            text-align: center;
        }

        .character-name {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .character-desc {
            color: #aaa;
            font-size: 0.9rem;
        }

        /* 场景界面样式 */
        #gameScreen {
            display: none;
        }

        .scene-container {
            position: relative;
            width: 100%;
            height: 500px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .scene-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.8s ease;
        }

        .scene-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));
            padding: 20px;
        }

        .scene-title {
            font-size: 1.2rem;
            color: #00ffcc;
            margin-bottom: 10px;
        }

        /* 对话框样式 */
        .dialogue-box {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            border-left: 5px solid #00ffcc;
        }

        .character-display {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .character-avatar {
            /* width: 60px;
            height: 60px;
            border-radius: 50%; */
            object-fit: cover;
            border: 3px solid #00ffcc;
            margin-right: 15px;

            width: 150px;
            height: 300px;
            position: absolute;
            top: -335px;
            right: 0;
        }

        .character-name-display {
            font-size: 1.5rem;
            font-weight: bold;
            color: #00ffcc;
        }

        .dialogue-text {
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 25px;
            min-height: 60px;
        }

        /* 按钮样式 */
        .btn {
            background: linear-gradient(45deg, #00ffcc, #00cc99);
            color: #000;
            border: none;
            padding: 12px 40px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 0 auto;
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 255, 204, 0.4);
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-secondary {
            background: #666;
            color: #fff;
            margin-top: 10px;
        }

        .btn-start {
            margin-top: 30px;
        }

        .hidden {
            display: none;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .character-selection {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .scene-container {
                height: 300px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .dialogue-text {
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .character-selection {
                grid-template-columns: 1fr;
            }
            
            .scene-container {
                height: 200px;
            }
            
            .dialogue-box {
                padding: 15px;
            }
        }

        /* 版权信息 */
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #aaa;
            font-size: 0.9rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .footer p {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 选择界面 -->
        <div id="selectionScreen">
            <header>
                <h1>夏日物语：与她的相遇</h1>
                <p class="subtitle">请选择一个角色开始你的故事</p>
            </header>

            <div class="character-selection">
                <div class="character-card" data-id="1">
                    <img src="1.png" alt="蓝发少女" onerror="this.onerror=null; this.src='data:image/svg+xml;utf8,<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 200 300\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"100%\" height=\"100%\" fill=\"#3498db\"/></svg>
                    <div class="character-info">
                        <div class="character-name">蓝发少女</div>
                        <div class="character-desc">温柔文静，喜欢绘画和阅读</div>
                    </div>
                </div>

                <div class="character-card" data-id="2">
                    <img src="2.png" alt="绿发少女" onerror="this.onerror=null; this.src='data:image/svg+xml;utf8,<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 200 300\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"100%\" height=\"100%\" fill=\"#2ecc71\"/></svg>
                    <div class="character-info">
                        <div class="character-name">绿发少女</div>
                        <div class="character-desc">活泼开朗，喜欢户外活动</div>
                    </div>
                </div>

                <div class="character-card" data-id="3">
                    <img src="3.png" alt="银发少女" onerror="this.onerror=null; this.src='data:image/svg+xml;utf8,<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 200 300\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"100%\" height=\"100%\" fill=\"#95a5a6\"/></svg>
                    <div class="character-info">
                        <div class="character-name">银发少女</div>
                        <div class="character-desc">神秘优雅，喜欢星空和音乐</div>
                    </div>
                </div>

                <div class="character-card" data-id="4">
                    <img src="4.png" alt="紫发少女" onerror="this.onerror=null; this.src='data:image/svg+xml;utf8,<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 200 300\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"100%\" height=\"100%\" fill=\"#9b59b6\"/></svg>
                    <div class="character-info">
                        <div class="character-name">紫发少女</div>
                        <div class="character-desc">浪漫梦幻，喜欢游乐园和甜点</div>
                    </div>
                </div>
            </div>

            <button id="startButton" class="btn btn-start">开始故事</button>
        </div>

        <!-- 游戏界面 -->
        <div id="gameScreen">
            <div class="scene-container">
                <img id="sceneImage" class="scene-image" src="" alt="场景图片">
                <div class="scene-overlay">
                    <div id="sceneTitle" class="scene-title"></div>
                </div>
            </div>

            <div class="dialogue-box">
                <div class="character-display">
                    <img id="dialogueAvatar" class="character-avatar" src="" alt="角色头像">
                    <div id="dialogueName" class="character-name-display"></div>
                </div>
                
                <div id="dialogueText" class="dialogue-text">
                    点击"开始对话"按钮继续故事...
                </div>
                
                <div class="button-group">
                    <button id="nextButton" class="btn">开始对话</button>
                    <button id="restartButton" class="btn btn-secondary hidden">重新开始</button>
                </div>
            </div>
        </div>
        <footer class="footer">
            <p>© 2026 夏日物语：与她的相遇</p>
            <p>版权归属人：汪光宇 / 杨帆</p>
            <p>All Rights Reserved.</p>
        </footer>
    </div>

    <script>
        // 剧情数据
        const storyData = {
            characters: {
                1: { 
                    name: "蓝发少女", 
                    img: "1.png",
                    description: "温柔文静，喜欢绘画和阅读"
                },
                2: { 
                    name: "绿发少女", 
                    img: "2.png",
                    description: "活泼开朗，喜欢户外活动"
                },
                3: { 
                    name: "银发少女", 
                    img: "3.png",
                    description: "神秘优雅，喜欢星空和音乐"
                },
                4: { 
                    name: "紫发少女", 
                    img: "4.png",
                    description: "浪漫梦幻，喜欢游乐园和甜点"
                }
            },

            scenes: {
                home: { 
                    img: "场景1.jpg", 
                    title: "安静的午后" 
                },
                street: { 
                    img: "场景2.png", 
                    title: "雨后的街道" 
                },
                park_day: { 
                    img: "场景3.png", 
                    title: "阳光下的游乐园" 
                },
                park_night: { 
                    img: "场景4.png", 
                    title: "夜晚的摩天轮" 
                },
                beach: { 
                    img: "场景5.png", 
                    title: "黄昏的海滩" 
                },
                living_room: { 
                    img: "场景6.png", 
                    title: "温馨的客厅" 
                },
                extra1: { 
                    img: "场景7.png", 
                    title: "樱花树下" 
                },
                extra2: { 
                    img: "场景8.png", 
                    title: "星空下" 
                }
            },

            // 为每个角色定义不同的剧情线
            scripts: {
                // 蓝发少女的剧情 - 文艺向
                1: [
                    {
                        scene: "home",
                        character: 1,
                        text: "呼...终于完成了这幅《夏日的记忆》。调色盘上的颜料已经快干了，就像这个夏天一样短暂..."
                    },
                    {
                        scene: "street",
                        character: 0,
                        text: "放下画笔，我决定出门走走。雨后的空气带着泥土的芬芳，石板路上还残留着水迹..."
                    },
                    {
                        scene: "park_day",
                        character: 1,
                        text: "你知道吗？我每次画画的时候，都会想起我们第一次在画室相遇的场景..."
                    },
                    {
                        scene: "living_room",
                        character: 0,
                        text: "你送我的那本诗集，我已经读了第三遍。每一首诗都像在讲述我们的故事..."
                    },
                    {
                        scene: "beach",
                        character: 1,
                        text: "站在海边，听着涛声，我突然明白——有些感情，就像这海边的贝壳，需要时间才能找到最完美的那个..."
                    },
                    {
                        scene: "extra1",
                        character: 0,
                        text: "樱花虽然已经凋谢，但我用画笔记录下了它最美的瞬间。就像我用记忆记录下我们的每一个瞬间..."
                    },
                    {
                        scene: "home",
                        character: 1,
                        text: "这幅画，我想取名为《夏日的约定》。因为它见证了我们的相遇，也承载着我的感谢..."
                    },
                    {
                        scene: "home",
                        character: 0,
                        text: "（结局）画布上的色彩渐渐融合，就像我们之间那些说不清道不明的情感。这个夏天，因为有你，变得格外珍贵。"
                    }
                ],

                // 绿发少女的剧情 - 活力向
                2: [
                    {
                        scene: "park_day",
                        character: 2,
                        text: "耶！今天又是充满活力的一天！要不要一起去爬山？我知道一条很漂亮的小路！"
                    },
                    {
                        scene: "street",
                        character: 0,
                        text: "她总是这样充满活力，仿佛永远不知道疲惫。跟她在一起，整个世界都变得明亮起来..."
                    },
                    {
                        scene: "beach",
                        character: 2,
                        text: "看！我发现了好大一个贝壳！里面会不会有珍珠？啊哈哈哈，开玩笑的啦！"
                    },
                    {
                        scene: "park_day",
                        character: 0,
                        text: "旋转木马的灯光在她眼中闪烁，她的笑声比音乐还要动听..."
                    },
                    {
                        scene: "extra1",
                        character: 2,
                        text: "你知道吗？这棵树是附近最老的樱花树。春天的时候，花瓣飘落的样子美极了！明年春天，我们一起来看吧！"
                    },
                    {
                        scene: "park_night",
                        character: 0,
                        text: "夜晚的游乐园格外宁静，只有我们的脚步声和远处的虫鸣..."
                    },
                    {
                        scene: "beach",
                        character: 2,
                        text: "谢谢你愿意陪我一起疯。其实...我也有安静的时候，只是和你在一起，我就变得特别开心！"
                    },
                    {
                        scene: "park_day",
                        character: 0,
                        text: "（结局）太阳渐渐落下，但她的笑容永远像阳光一样温暖。这个充满活力的夏天，我会永远记住。"
                    }
                ],

                // 银发少女的剧情 - 神秘向
                3: [
                    {
                        scene: "living_room",
                        character: 3,
                        text: "这首月光奏鸣曲，是贝多芬写给永恒的爱人的。你听，每一个音符都在诉说着思念..."
                    },
                    {
                        scene: "street",
                        character: 0,
                        text: "夜晚的街道很安静，只有我们的脚步声和远处隐约传来的钢琴声..."
                    },
                    {
                        scene: "extra2",
                        character: 3,
                        text: "看那颗最亮的星星，那是天琴座的织女星。传说中，她每年七夕都会与牛郎相会..."
                    },
                    {
                        scene: "park_night",
                        character: 0,
                        text: "摩天轮缓缓升起，窗外的城市渐渐变小，仿佛整个宇宙都在我们脚下..."
                    },
                    {
                        scene: "extra2",
                        character: 3,
                        text: "你知道为什么星星会闪烁吗？因为它们在诉说着自己的故事，就像我们每个人一样..."
                    },
                    {
                        scene: "living_room",
                        character: 0,
                        text: "茶香在空气中弥漫，音乐在耳边流淌，时间仿佛在这一刻静止了..."
                    },
                    {
                        scene: "beach",
                        character: 3,
                        text: "海浪是地球的呼吸，星空是宇宙的眼睛。而你...是我在这个夏天最美的邂逅。"
                    },
                    {
                        scene: "extra2",
                        character: 0,
                        text: "（结局）星光洒在她的银发上，仿佛戴上了一顶闪烁的皇冠。这个神秘的夏天，让我看到了不一样的星空。"
                    }
                ],

                // 紫发少女的剧情 - 浪漫向
                4: [
                    {
                        scene: "park_night",
                        character: 4,
                        text: "快看！摩天轮的灯光亮起来了！像不像一颗巨大的星星？我们去坐最顶上的那个座舱吧！"
                    },
                    {
                        scene: "park_day",
                        character: 0,
                        text: "旋转木马的音乐声在耳边回响，她的笑声像糖果一样甜美..."
                    },
                    {
                        scene: "living_room",
                        character: 4,
                        text: "这是我亲手做的草莓蛋糕！虽然裱花有点歪，但味道应该不错...要尝尝看吗？"
                    },
                    {
                        scene: "extra1",
                        character: 0,
                        text: "虽然是夏天，但站在樱花树下，仿佛能想象到春天时花瓣飘落的浪漫场景..."
                    },
                    {
                        scene: "park_night",
                        character: 4,
                        text: "从这么高的地方看夜景，感觉整个世界都变得好小。但有些东西，离得越近反而越看不清..."
                    },
                    {
                        scene: "beach",
                        character: 0,
                        text: "海浪拍打着沙滩，夕阳把天空染成了粉色，就像她的脸颊..."
                    },
                    {
                        scene: "park_day",
                        character: 4,
                        text: "你知道吗？游乐园的传说——如果在摩天轮到达最高点时许愿，愿望就会实现..."
                    },
                    {
                        scene: "park_night",
                        character: 0,
                        text: "（结局）摩天轮转了一圈又回到起点，但有些事情已经不一样了。这个甜蜜的夏天，是记忆中永不褪色的粉红色。"
                    }
                ]
            }
        };

        // DOM元素
        const selectionScreen = document.getElementById('selectionScreen');
        const gameScreen = document.getElementById('gameScreen');
        const startButton = document.getElementById('startButton');
        const characterCards = document.querySelectorAll('.character-card');
        
        const sceneImage = document.getElementById('sceneImage');
        const sceneTitle = document.getElementById('sceneTitle');
        const dialogueAvatar = document.getElementById('dialogueAvatar');
        const dialogueName = document.getElementById('dialogueName');
        const dialogueText = document.getElementById('dialogueText');
        const nextButton = document.getElementById('nextButton');
        const restartButton = document.getElementById('restartButton');

        // 游戏状态
        let selectedCharacter = null;
        let currentStep = 0;
        let isFirstClick = true;
        let currentScript = [];

        // 角色选择
        characterCards.forEach(card => {
            card.addEventListener('click', function() {
                characterCards.forEach(c => c.classList.remove('selected'));
                this.classList.add('selected');
                selectedCharacter = this.dataset.id;
            });
        });

        // 开始故事
        startButton.addEventListener('click', function() {
            if (!selectedCharacter) {
                alert('请先选择一个角色！');
                return;
            }
            
            selectionScreen.style.display = 'none';
            gameScreen.style.display = 'block';
            
            // 加载对应角色的剧情
            currentScript = storyData.scripts[selectedCharacter];
            
            // 初始化第一个场景
            showCurrentDialogue();
        });

        // 显示当前对话
        function showCurrentDialogue() {
            if (currentStep >= currentScript.length) {
                showEnding();
                return;
            }

            const line = currentScript[currentStep];
            const scene = storyData.scenes[line.scene];
            
            // 更新场景
            sceneImage.src = scene.img;
            sceneTitle.textContent = scene.title;
            
            // 设置默认占位图
            sceneImage.onerror = function() {
                this.src = 'data:image/svg+xml;utf8,<svg width="100%" height="100%" viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg"><rect width="100%" height="100%" fill="#2c3e50"/><text x="50%" y="50%" text-anchor="middle" fill="white" font-size="20">场景图片</text></svg>';
            };

            // 更新对话
            if (line.character === 0) {
                dialogueAvatar.style.display = 'none';
                dialogueName.textContent = '';
                dialogueText.innerHTML = `<i>${line.text}</i>`;
            } else {
                dialogueAvatar.style.display = 'block';
                const char = storyData.characters[line.character];
                dialogueAvatar.src = char.img;
                dialogueAvatar.onerror = function() {
                    this.src = 'data:image/svg+xml;utf8,<svg width="100%" height="100%" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="45" fill="#34495e"/><text x="50" y="55" text-anchor="middle" fill="white" font-size="12">头像</text></svg>';
                };
                dialogueName.textContent = char.name;
                dialogueText.textContent = line.text;
            }
            
            if (isFirstClick) {
                nextButton.textContent = "开始对话";
                isFirstClick = false;
            } else {
                nextButton.textContent = "继续";
            }
        }

        // 显示结局
        function showEnding() {
            const char = storyData.characters[selectedCharacter];
            sceneImage.src = storyData.scenes.home.img;
            sceneTitle.textContent = `${char.name}的故事`;
            dialogueAvatar.style.display = 'block';
            dialogueAvatar.src = char.img;
            dialogueName.textContent = "故事结束";
            dialogueText.innerHTML = `<strong>${char.name}的故事已完结</strong><br><br>感谢你体验${char.name}的故事。每个角色都有不同的个性和经历，试着探索其他角色的故事线吧！`;
            nextButton.style.display = 'none';
            restartButton.classList.remove('hidden');
        }

        // 下一句对话
        nextButton.addEventListener('click', function() {
            currentStep++;
            showCurrentDialogue();
        });

        // 重新开始
        restartButton.addEventListener('click', function() {
            // 重置状态
            currentStep = 0;
            selectedCharacter = null;
            isFirstClick = true;
            currentScript = [];
            
            // 重置UI
            characterCards.forEach(card => card.classList.remove('selected'));
            selectionScreen.style.display = 'block';
            gameScreen.style.display = 'none';
            nextButton.style.display = 'block';
            restartButton.classList.add('hidden');
            
            // 重置对话显示
            dialogueAvatar.style.display = 'none';
            dialogueName.textContent = '';
            dialogueText.textContent = '点击"开始对话"按钮继续故事...';
        });

        // 图片加载检测
        function checkImages() {
            const images = [
                '1.png', '2.png', '3.png', '4.png',
                '场景1.jpg', '场景2.png', '场景3.png', '场景4.png',
                '场景5.png', '场景6.png', '场景7.png', '场景8.png'
            ];
            
            images.forEach(img => {
                const testImg = new Image();
                testImg.onload = function() {
                    console.log(`✅ ${img} 加载成功`);
                };
                testImg.onerror = function() {
                    console.warn(`❌ ${img} 加载失败，将使用占位图`);
                };
                testImg.src = img;
            });
        }

        // 页面加载完成后检查图片
        window.addEventListener('DOMContentLoaded', checkImages);
    </script>
</body>
</html>